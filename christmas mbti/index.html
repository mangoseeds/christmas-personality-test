<html>
    <head>
        <title>크리스마스 유형 테스트</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    </head>
    <body>
        <!-- START PAGE -->
        <article class="start_page">
            <div class="banner">
                <div class="navbar">
                    <img src="home.png" class="home"> <!--배너 사진은 가능한 결과 조그맣게 쭉 이어서; 클릭하면 크리스마스 사진? -->
                    <ul>
                        <li><a href="www.testurl" onclick="copyURI(event)">공유하기</a></li>
                    </ul>
                </div>
            </div>
    
            <div class="content">
                <h1>크리스마스 유형 테스트</h1>
                <button type="button" class="button" onclick="start();" style="width:inherit">시작하기</button>
            </div>
        </article>
        
        <!-- QUIZ PAGE -->
        <article class="quiz_page">
            <div class="progress-bar bg-info" role="progressbar" syle="width: calc(100/12*1%)" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            <div>
                <h1 style="width: 100%; height: 50%">문제</h1>
                <input id="type" type="hidden" value="EI">
                <div>
                    <button id="A" type="button" onclick="Aclick();">선택1</button><!--
                    --><button id="B" type="button" onclick="Bclick();">선택2</button>
                </div>
            </div>           
        </article>

        <!-- RESULT PAGE -->
        <article class="result_page">
            <div class="banner">
                <div class="navbar">
                    <img src="home.png" class="logo">
                    <ul>
                        <li><a href="image file" download>저장하기</a></li>
                        <li><a href="www.testurl" onclick="copyURI(event)">공유하기</a></li>
                    </ul>
                </div>
            </div>
            <div class="content">
                <!-- <h1>당신은...</h1> -->
                <!-- <img src="result.png" class="result"> -->
            </div>
        </article>

        <input type="hidden" id="EI" value="0">
        <input type="hidden" id="SN" value="0">
        <input type="hidden" id="TF" value="0">
        <input type="hidden" id="JP" value="0">

        
        <script>
            let num = 1;
            const q = {
                1: {"title": "연말 파티에 초대 받은 당신! 꽤 많은 사람이 모여 있을 거라고 하는데", "type": "EI", "A": "파티 좋지 오랜만에 못보던 얼굴들도 보고", "B": "난 그냥 집에서 재밌는 영화나 볼래", "BackgroundColor": "#FF48B0", "TextColor": "#AC936E"},
                2: {"title": "친구가 작년에 준 크리스마스 선물! 일년동안 한번도 사용한 적이 없는데", "type": "TF", "A": "더 잘 활용할 사람에게 주자", "B": "그래도 선물로 받았으니 일단은 가지고 있을래"},
                3: {"title": "드레스코드가 정해진 크리스마스 파티, 나는", "type": "EI", "A": "화려한 옷을 고른다", "B": "무난한 옷을 고른다"},
                4: {"title": "만약 내일 아침에 일어났을 때, 내가 크리스마스 트리로 변해있으면?", "type": "SN", "A": "그건 불가능해", "B": "내가 어떻게 할지 이런 저런 상상이 펼쳐진다"},
                5: {"title": "우리 내일 만나자! 라고 물어보는 친구, 하지만 내일은 날씨가 안좋다", "type": "EI", "A": "크게 상관 없지", "B": "내일 말고 다른 날 어때?"},
                6: {"title": "친구에게 크리스마스 선물을 주었을 때 더 듣기 좋은 말은", "type": "TF", "A": "내가 갖고 싶다고 얘기했던거네! 어떻게 기억력이 이렇게 좋아?", "B": "내가 딱 원했던건데, 역시 넌 섬세해"},
                7: {"title": "바로 내일이 크리스마스 파티! 잠들기 전에", "type": "SN", "A": "별 생각 없이 잠든다", "B": "내일 무슨 일이 있을지 상상을 하며 잠든다"},            
                8: {"title": "연말 파티에 친구와 나는 케이크 담당을 맡았다! 어디서 살지 심사숙고하여 고르는데", "type": "SN", "A": "검색을 대충해보면 바로 느낌이 온다", "B": "꼼꼼히 후기를 읽어보고 고른다"},
                9: {"title": "함께 연말 파티를 위한 케이크를 친구와 사러 가기로 했는데 약속 시간에 30분이나 늦을 것 같은데", "type": "TF", "A": "미안 30분정도 늦을 것 같아. 연말이라 그런지 차가 많이 막히네", "B": "좀 많이 늦을 것 같아. 추운데 기다리게 해서 미안"},
                10: {"title": "내 지각으로 원래 가려고 했던 케이크 가게는 영업 시간이 끝났을 때", "type": "JP", "A": "이미 가는 길에 새로운 케이크 가게를 찾아뒀고 친구를 만나서 바로 출발한다", "B": "친구랑 함께 검색하여 새로 갈 곳을 고른다"},
                11: {"title": "계획이 흐트러진 것에 대해", "type": "JP", "A": "조금은 스트레스를 받는다", "B": "별 고민과 스트레스 없이 넘길 수 있다"},
                12: {"title": "곧 시작되는 2023년, 나는", "type": "JP", "A": "내년에 무엇을 하고 싶은지 상세한 계획을 세워뒀다", "B": "이루고 싶은 목표 정도는 생각해 봤다"}
            }

            const result = {
                "ISTJ": {"img":"img_istj.jpg"},
                "ISFJ": {"img":"img_isfj.jpg"},
                "INTJ": {"img":"img_intj.jpg"},
                "INFJ": {"img":"img_infj.jpg"},
                "ISTP": {"img":"img_istp.jpg"},
                "ISFP": {"img":"img_isfp.jpg"},
                "INTP": {"img":"img_intp.jpg"},
                "INFP": {"img":"img_infp.jpg"},

                "ESTJ": {"img":"img_estj.jpg"},
                "ESFJ": {"img":"img_esfj.jpg"},
                "ENTJ": {"img":"img_entj.jpg"},
                "ENFJ": {"img":"img_enfj.jpg"},
                "ESTP": {"img":"img_estp.jpg"},
                "ESFP": {"img":"img_esfp.jpg"},
                "ENTP": {"img":"img_entp.jpg"},
                "ENFP": {"img":"img_enfp.jpg"},
            }

            function copyURI(evt){
                evt.preventDefault();
                navigator.clipboard.writeText(evt.target.getAttribute('href')).then(() => {
                    /*clipboard successfully set */
                }, () => {
                    /*clipboard set failed */
                });
            };

            //hide start_page, show question_page
            function start(){
                $(".start_page").hide();
                $(".question_page").show();
                next();
            };
            
            function Aclick(){
                let type = $("#type").val();
                let preValue = $("#"+type).val();
                $("#"+type).val(parseInt(preValue)+1);
                next();
            };
            function Bclick(){
                next();
            };

            // $("#A").click(function(){
            //     let type = $("#type").val();
            //     let preValue = $("#"+type).val();
            //     $("#"+type).val(parseInt(preValue)+1);
            //     next();
            // });
            // $("#B").click(function(){
            //     next();
            // });

            function next() {
                if (num==13) {
                    $(".question_page").hide();
                    $(".result_page").show();

                    let mbti = "";

                    ($("#EI").val()<2) ? mbti+="I" : mbti+="E";
                    ($("#SN").val()<2) ? mbti+="N" : mbti+="S";
                    ($("#TF").val()<2) ? mbti+="F" : mbti+="T";
                    ($("#JP").val()<2) ? mbti+="P" : mbti+="J";

                    $("#img").attr("src",result[mbti]["img"]);
                    $("#result").html(result[mbti]["result"]);
                    $("#explain").html(rsult[mbti]["explain"]);
                } else {
                    $(".progress-bar").attr('style','width: calc(100/12*'+num+'%)');
                    //문제 & 선택지
                    $("#title").html(q[num]["title"]);
                    $("#type").val(q[num]["type"]);
                    $("#A").html(q[num]["A"]);
                    $("#B").html(q[num]["B"]);

                    $(".quiz_page").style.BackgroundColor(q[num]["BackgroundColor"]);
                    $("#A").style.BackgroundColor(q[num]["BackgroundColor"]);
                    $("#A").style.TextColor(q[num]["TextColor"]);
                    $("#B").style.BackgroundColor(q[num]["BackgroundColor"]);
                    $("#B").style.TextColor(q[num]["TextColor"]);

                    let A = $("#A");
                    A.addEventListener("mouseenter", function(event){
                        event.target.style.color = q[num]["TextColor"];
                        event.target.style.TextColor = q[num]["BackgroundColor"];
                    }, false);
                    A.addEventListener("mouseleave", function(event){
                        event.target.style.color = q[num]["BackgroundColor"];
                        event.target.style.TextColor = q[num]["TextColor"];
                    }, false);

                    num++;
                }
            }

        </script>
    </body> 

</html>